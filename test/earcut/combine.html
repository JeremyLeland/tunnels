<title>Hover over earcut triangles</title>
<link rel="stylesheet" href="../../style.css">

<canvas id="canvas" width="800px" height="800px"></canvas>

<script type="module">
  import { CellMap } from './CellMap.js';

  const json = JSON.parse( await ( await fetch( './test1.json' ) ).text() );

  const cellMap = new CellMap( json.walls );

  const ctx = document.getElementById( 'canvas' ).getContext( '2d' );
  draw();

  cellMap.merge( 0, 2 );
  draw();
  cellMap.merge( 1, 2 );
  draw();
  cellMap.merge( 2, 2 );
  draw();

  let mouseX = 0, mouseY = 0;
  document.addEventListener( 'mousemove', ( e ) => {
    mouseX = e.offsetX;
    mouseY = e.offsetY;
    draw();
  } );

  function draw() {
    ctx.clearRect( 0, 0, ctx.canvas.width, ctx.canvas.height );
    ctx.strokeStyle = 'brown';
    cellMap.draw( ctx );
  }
  
</script>