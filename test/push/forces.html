<title>Repulsion forces</title>
<link rel="stylesheet" href="../grid.css">

<body></body>

<script type="module">

  import { Game } from '../../src/Game.js';
  import { World } from '../../src/World.js';
  
  const game = new Game();
  game.start();

  const json = {
    entities: [
      { x: 300, y: 300, angle: 0, type: 'marine' },
      { x: 400, y: 300, angle: 1, type: 'marine' },
      { x: 400, y: 400, angle: 2, type: 'marine' },
      { x: 300, y: 400, angle: 3, type: 'marine' },
    ],
    walls: [
      [ [ 200, 600 ], [ 400, 500 ], [ 400, 650 ] ],
      [ [ 500, 500 ], [ 700, 300 ], [ 700, 500 ] ],
    ],
  };

  const world = new World( json );

  const player = world.entities[ 2 ];
  
  game.update = ( dt ) => {
    world.update( dt );
  };

  game.draw = ( ctx ) => {
    world.draw( ctx );
  };

  document.addEventListener( 'mousemove', e => {
    const x = e.clientX - game.scroll.x;
    const y = e.clientY - game.scroll.y;

    player.x = x;
    player.y = y;
  } );

</script>